var T=Object.defineProperty,B=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var N=(r,t,i)=>t in r?T(r,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[t]=i,p=(r,t)=>{for(var i in t||(t={}))z.call(t,i)&&N(r,i,t[i]);if(y)for(var i of y(t))q.call(t,i)&&N(r,i,t[i]);return r},h=(r,t)=>B(r,D(t));import{u as J,q as $,r as g,j as e,bT as L,bU as w}from"./index-f22446e5.js";import{P as A}from"./PageContainer-53646ac6.js";import{C as m}from"./CustomFormLabel-1e27e530.js";import{C as u}from"./CustomTextField-6979225c.js";import{L as H}from"./Logo-bd3200cf.js";import{k as Q,Q as x}from"./ReactToastify-7587e975.js";import{j as R,T as V}from"./Typography-493ceae3.js";import{G as E}from"./Grid-6c01a67e.js";import{C as _}from"./Card-99a14ea7.js";import{S}from"./Stack-8d476df3.js";import{B as W}from"./Button-7d294087.js";import{u as K}from"./useDispatch-ce130263.js";import"./TextField-eaaf417f.js";import"./FormControl-902fa994.js";import"./utils-5ebfb48b.js";import"./useFormControl-c5cffc22.js";import"./isMuiElement-0a1be5b6.js";import"./useId-6ded1857.js";import"./formControlState-02eb4045.js";import"./Select-8c02317b.js";import"./Popover-9060c6fe.js";import"./Modal-99caf082.js";import"./Fade-6b4e951e.js";import"./utils-e57cfcaa.js";import"./ownerDocument-613eb639.js";import"./ownerWindow-698471fc.js";import"./createChainedFunction-0bab83cf.js";import"./Portal-bdf58041.js";import"./Paper-eafa25ad.js";import"./Grow-1067b88b.js";import"./List-24f7ff12.js";import"./ListContext-74b9cccd.js";import"./useControlled-7a3bcd39.js";import"./InputBase-6d6630d9.js";import"./clsx.m-1229b3e0.js";import"./createStack-e9d30bfe.js";import"./styled-af0837ae.js";const M=R(),o=M;function $e(){const r=J(),t=K(),{currentUser:i,isValidating:X,isLoading:Y,login:F,logout:Z,error:ee,updateCurrentUser:te,getUserCookie:se}=$(),[P,re]=g.useState(!1),[f,U]=g.useState({userEmail:"",password:""}),[j,k]=g.useState({userName:"",email:"",phoneNumber:""}),C=s=>x.success(s,{toastId:"success"}),I=s=>x.error(s,{toastId:"error"}),d=s=>x.warn(s,{toastId:"warn"}),b=s=>{const a=s.target.id,l=s.target.value.trim();U(h(p({},f),{[a]:l}))},G=s=>{s.preventDefault();const{userEmail:a,password:l}=f;a!==""&&l!==""?F(a,l).then(n=>{C("Logged in sucessfully"),t(L(n.full_name)),t(w(a)),console.log("inside then "+JSON.stringify(n)),setTimeout(()=>{r("/dashboards/noveldashboard")},1500)}).catch(n=>{console.log("inside catch "+JSON.stringify(n.message)),I(n.message)}):d("Please fill all the details")},c=s=>{const a=s.target.id,l=s.target.value.trim();k(h(p({},j),{[a]:l}))},O=()=>{var s="^[0-9]+$";const{userName:a,email:l,phoneNumber:n}=j;if(a!==""&&l!==""&&n!=="")if(n.length!==10)d("Phone Number must contain 10 numbers");else if(!n.match(s))d("Please enter a valid phone number");else{let v={name:"Guest",email:"guest@mail.com"};t(L(v.name)),t(w(v.email)),C("Logging in as Guest"),setTimeout(()=>{r("/dashboards/noveldashboard")},1500)}else d("Please fill all the details")};return e.jsx(A,{title:"Login",description:"this is Login page",children:e.jsxs(o,{sx:{position:"relative","&:before":{content:'""',background:"radial-gradient(#d2f1df, #d3d7fa, #bad8f4)",backgroundSize:"400% 400%",animation:"gradient 15s ease infinite",position:"absolute",height:"100%",width:"100%",opacity:"0.3"}},children:[e.jsx(E,{container:!0,spacing:0,justifyContent:"center",sx:{height:"100vh"},children:e.jsx(E,{item:!0,xs:12,sm:12,lg:5,xl:4,display:"flex",justifyContent:"center",alignItems:"center",children:e.jsxs(_,{elevation:24,sx:{p:4,zIndex:1,width:"100%",maxWidth:{xs:"350px",md:"350px",lg:"450px"}},children:[e.jsx(o,{display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(H,{})}),e.jsxs(e.Fragment,{children:[e.jsx(V,{fontWeight:"700",variant:"h3",mb:1}),P?e.jsxs(o,{children:[e.jsxs(S,{children:[e.jsxs(o,{children:[e.jsx(m,{htmlFor:"userName",children:"Name"}),e.jsx(u,{id:"userName",variant:"outlined",fullWidth:!0,autoComplete:"userName",onChange:c})]}),e.jsxs(o,{children:[e.jsx(m,{htmlFor:"email",children:"Email"}),e.jsx(u,{id:"email",type:"email",variant:"outlined",fullWidth:!0,autoComplete:"email",onChange:c})]}),e.jsxs(o,{children:[e.jsx(m,{htmlFor:"phoneNumber",children:"Phone number"}),e.jsx(u,{id:"phoneNumber",type:"text",variant:"outlined",fullWidth:!0,autoComplete:"current-phoneNumber",onChange:c})]})]}),e.jsx(o,{mt:3,children:e.jsx(W,{color:"primary",variant:"contained",size:"large",fullWidth:!0,onClick:O,type:"submit",children:"Sign In As Guest"})})]}):e.jsxs("form",{children:[e.jsxs(S,{children:[e.jsxs(o,{children:[e.jsx(m,{htmlFor:"userEmail",children:"Email"}),e.jsx(u,{id:"userEmail",variant:"outlined",autoComplete:"userEmail",fullWidth:!0,onChange:b})]}),e.jsxs(o,{children:[e.jsx(m,{htmlFor:"password",children:"Password"}),e.jsx(u,{id:"password",type:"password",variant:"outlined",fullWidth:!0,autoComplete:"current-password",onChange:b})]})]}),e.jsx(o,{mt:3,children:e.jsx(W,{color:"primary",variant:"contained",size:"large",fullWidth:!0,onClick:G,type:"submit",children:"Sign In"})})]})]})]})})}),e.jsx(Q,{position:"top-center",autoClose:1e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})})}export{$e as default};
