import{e as g,r as M,M as E,R as h,j as e,f as P,S as O,Q as W,l as F,T as k}from"./index-f22446e5.js";import{B as G}from"./Breadcrumb-c1517ab0.js";import{P as H}from"./PageContainer-53646ac6.js";import{S as I}from"./Scrollbar-4e88fbd7.js";import{D as N,g as Q,G as w,u as U,w as $,x as q,y as J,A as X,R as Y,F as _}from"./index.esm-e0300107.js";import{B as t}from"./Box-f8c4e902.js";import{B as v}from"./Badge-98ae8b85.js";import{A as f}from"./Avatar-934745ac.js";import{T as d}from"./Typography-493ceae3.js";import{T as K}from"./TextField-eaaf417f.js";import{I as V}from"./InputAdornment-ad52364f.js";import{L as Z}from"./List-24f7ff12.js";import{B as ee}from"./Button-7d294087.js";import{M as re}from"./Select-8c02317b.js";import{M as C}from"./MenuItem-65e34cdb.js";import{L as te}from"./ListItemButton-23d5f8ef.js";import{L as S}from"./ListItemAvatar-e4b79901.js";import{L as A}from"./ListItemText-8858e1cf.js";import{f as D}from"./index-15eab23a.js";import{A as se}from"./Alert-22334c2d.js";import{u as L}from"./useDispatch-ce130263.js";import{u as B}from"./useMediaQuery-39de02de.js";import{D as ie}from"./Drawer-6833f653.js";import{L as ae}from"./ListItem-91f72477.js";import{S as oe}from"./Stack-58acc4b3.js";import{I as m}from"./IconButton-dffcd583.js";import{D as R}from"./Divider-efe6cf9e.js";import{P as ne}from"./Popover-9060c6fe.js";import{I as le}from"./InputBase-6d6630d9.js";import{A as ce}from"./AppCard-7a1e954a.js";import"./Grid-6c01a67e.js";import"./Link-f430d0ec.js";import"./index-276feae1.js";import"./usePreviousProps-bc01b69b.js";import"./FormControl-902fa994.js";import"./utils-5ebfb48b.js";import"./useFormControl-c5cffc22.js";import"./isMuiElement-0a1be5b6.js";import"./useId-6ded1857.js";import"./formControlState-02eb4045.js";import"./ListContext-74b9cccd.js";import"./Modal-99caf082.js";import"./Fade-6b4e951e.js";import"./utils-e57cfcaa.js";import"./ownerDocument-613eb639.js";import"./ownerWindow-698471fc.js";import"./createChainedFunction-0bab83cf.js";import"./Portal-bdf58041.js";import"./useControlled-7a3bcd39.js";import"./listItemIconClasses-5a5c13b9.js";import"./dividerClasses-0b6de4a8.js";import"./listItemTextClasses-243cffc5.js";import"./listItemButtonClasses-35818a18.js";import"./index-5a0c5ef2.js";import"./index-f401f0bd.js";import"./Close-fff9c548.js";import"./Paper-eafa25ad.js";import"./Slide-008ae128.js";import"./createStack-e9d30bfe.js";import"./styled-af0837ae.js";import"./Grow-1067b88b.js";import"./Card-99a14ea7.js";const de=()=>{const a=L(),n=g(r=>r.chatReducer.chatContent);M.useEffect(()=>{a(E())},[a]);const l=(r,c)=>r&&r.filter(o=>o.name.toLocaleLowerCase().includes(c.toLocaleLowerCase())),i=g(r=>l(r.chatReducer.chats,r.chatReducer.chatSearch)),s=r=>{let c="";const o=r.messages[r.messages.length-1];if(o){const T=o.senderId===r.id?"You: ":"",z=o.type==="image"?"Sent a photo":o.msg;c=`${T}${z}`}return c},u=r=>{var c;return(c=F.last(r.messages))==null?void 0:c.createdAt},[b,j]=h.useState(null),x=!!b,y=r=>{j(r.currentTarget)},p=()=>{j(null)};return e.jsxs("div",{children:[e.jsxs(t,{display:"flex",alignItems:"center",gap:"10px",p:3,children:[e.jsx(v,{variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"right"},overlap:"circular",color:"success",children:e.jsx(f,{alt:"Remy Sharp",src:P,sx:{width:54,height:54}})}),e.jsxs(t,{children:[e.jsx(d,{variant:"body1",fontWeight:600,children:"John Deo"}),e.jsx(d,{variant:"body2",children:"Marketing Manager"})]})]}),e.jsx(t,{px:3,py:1,children:e.jsx(K,{id:"outlined-search",placeholder:"Search contacts",size:"small",type:"search",variant:"outlined",InputProps:{endAdornment:e.jsx(V,{position:"end",children:e.jsx(N,{size:"16"})})},fullWidth:!0,onChange:r=>a(O(r.target.value))})}),e.jsxs(Z,{sx:{px:0},children:[e.jsxs(t,{px:2.5,pb:1,children:[e.jsxs(ee,{id:"basic-button","aria-controls":x?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":x?"true":void 0,onClick:y,color:"inherit",children:["Recent Chats ",e.jsx(Q,{size:"16"})]}),e.jsxs(re,{id:"basic-menu",anchorEl:b,open:x,onClose:p,MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsx(C,{onClick:p,children:"Sort By Time"}),e.jsx(C,{onClick:p,children:"Sort By Unread"}),e.jsx(C,{onClick:p,children:"Mark as all Read"})]})]}),e.jsx(I,{sx:{height:{lg:"calc(100vh - 100px)",md:"100vh"},maxHeight:"600px"},children:i&&i.length?i.map(r=>e.jsxs(te,{onClick:()=>a(W(r.id)),sx:{mb:.5,py:2,px:3,alignItems:"start"},selected:n===r.id,children:[e.jsx(S,{children:e.jsx(v,{color:r.status==="online"?"success":r.status==="busy"?"error":r.status==="away"?"warning":"secondary",variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"right"},overlap:"circular",children:e.jsx(f,{alt:"Remy Sharp",src:r.thumb,sx:{width:42,height:42}})})}),e.jsx(A,{primary:e.jsx(d,{variant:"subtitle2",fontWeight:600,mb:.5,children:r.name}),secondary:s(r),secondaryTypographyProps:{noWrap:!0},sx:{my:0}}),e.jsx(t,{sx:{flexShrink:"0"},mt:.5,children:e.jsx(d,{variant:"body2",children:D(new Date(u(r)),{addSuffix:!1})})})]},r.id)):e.jsx(t,{m:2,children:e.jsx(se,{severity:"error",variant:"filled",sx:{color:"white"},children:"No Contacts Found!"})})})]})]})},me=320,pe=({isMobileSidebarOpen:a,onSidebarClose:n})=>{const l=B(i=>i.breakpoints.up("lg"));return e.jsx(ie,{open:a,onClose:n,variant:l?"permanent":"temporary",sx:{width:me,flexShrink:0,zIndex:l?0:1,"& .MuiDrawer-paper":{position:"relative"}},children:e.jsx(de,{})})},xe=({toggleChatSidebar:a})=>{const[n,l]=h.useState(!0);B(s=>s.breakpoints.up("lg"));const i=g(s=>s.chatReducer.chats[s.chatReducer.chatContent-1]);return e.jsx(t,{children:i?e.jsxs(t,{children:[e.jsxs(t,{children:[e.jsxs(t,{display:"flex",alignItems:"center",p:2,children:[e.jsx(t,{sx:{display:{xs:"block",md:"block",lg:"none"},mr:"10px"},children:e.jsx(w,{stroke:1.5,onClick:a})}),e.jsxs(ae,{dense:!0,disableGutters:!0,children:[e.jsx(S,{children:e.jsx(v,{color:i.status==="online"?"success":i.status==="busy"?"error":i.status==="away"?"warning":"secondary",variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"right"},overlap:"circular",children:e.jsx(f,{alt:i.name,src:i.thumb})})}),e.jsx(A,{primary:e.jsx(d,{variant:"h5",children:i.name}),secondary:i.status})]},i.id),e.jsxs(oe,{direction:"row",children:[e.jsx(m,{"aria-label":"delete",children:e.jsx(U,{stroke:1.5})}),e.jsx(m,{"aria-label":"delete",children:e.jsx($,{stroke:1.5})}),e.jsx(m,{"aria-label":"delete",onClick:()=>l(!n),children:e.jsx(q,{stroke:1.5})})]})]}),e.jsx(R,{})]}),e.jsx(t,{display:"flex",children:e.jsx(t,{width:"100%",children:e.jsx(I,{sx:{height:"650px",overflow:"auto",maxHeight:"800px"},children:e.jsx(t,{p:3,children:i.messages.map(s=>e.jsx(t,{children:i.id===s.senderId?e.jsx(e.Fragment,{children:e.jsxs(t,{display:"flex",children:[e.jsx(S,{children:e.jsx(f,{alt:i.name,src:i.thumb,sx:{width:40,height:40}})}),e.jsxs(t,{children:[s.createdAt?e.jsxs(d,{variant:"body2",color:"grey.400",mb:1,children:[i.name,","," ",D(new Date(s.createdAt),{addSuffix:!1})," ","ago"]}):null,s.type==="text"?e.jsx(t,{mb:2,sx:{p:1,backgroundColor:"grey.100",mr:"auto",maxWidth:"320px"},children:s.msg}):null,s.type==="image"?e.jsx(t,{mb:1,sx:{overflow:"hidden",lineHeight:"0px"},children:e.jsx("img",{src:s.msg,alt:"attach",width:"150"})}):null]})]})}):e.jsx(t,{mb:1,display:"flex",alignItems:"flex-end",flexDirection:"row-reverse",children:e.jsxs(t,{alignItems:"flex-end",display:"flex",flexDirection:"column",children:[s.createdAt?e.jsx(d,{variant:"body2",color:"grey.400",mb:1,children:"ago"}):null,s.type==="text"?e.jsx(t,{mb:1,sx:{p:1,backgroundColor:"primary.light",ml:"auto",maxWidth:"320px"},children:s.msg},s.id):null,s.type==="image"?e.jsx(t,{mb:1,sx:{overflow:"hidden",lineHeight:"0px"},children:e.jsx("img",{src:s.msg,alt:"attach",width:"250"})}):null]})})},s.id+s.msg+s.createdAt))})})})})]}):e.jsxs(t,{display:"flex",alignItems:"center",p:2,pb:1,pt:1,children:[e.jsx(t,{sx:{display:{xs:"flex",md:"flex",lg:"none"},mr:"10px"},children:e.jsx(w,{stroke:1.5,onClick:a})}),e.jsx(d,{variant:"h4",children:"Select Chat"})]})})},he=()=>{const[a,n]=h.useState(""),l=L(),[i,s]=h.useState(null),[u,b]=h.useState(),j=o=>{s(o.currentTarget)},x=()=>{s(null)},y=g(o=>o.chatReducer.chatContent),p=o=>{n(o.target.value)},r={id:y,msg:a},c=o=>{o.preventDefault(),o.stopPropagation(),l(k(r)),n("")};return e.jsx(t,{p:2,children:e.jsxs("form",{onSubmit:c,style:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsx(m,{"aria-label":"more",id:"long-button","aria-controls":"long-menu","aria-expanded":"true","aria-haspopup":"true",onClick:j,children:e.jsx(J,{})}),e.jsx(ne,{id:"long-menu",anchorEl:i,keepMounted:!0,open:!!i,onClose:x,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"bottom"},children:e.jsxs(t,{p:2,children:["Selected: ",u?u.emoji:""]})}),e.jsx(le,{id:"msg-sent",fullWidth:!0,value:a,placeholder:"Type a Message",size:"small",type:"text",inputProps:{"aria-label":"Type a Message"},onChange:p.bind(null)}),e.jsx(m,{"aria-label":"delete",onClick:()=>{l(k(r)),n("")},disabled:!a,color:"primary",children:e.jsx(X,{stroke:1.5,size:"20"})}),e.jsx(m,{"aria-label":"delete",children:e.jsx(Y,{stroke:1.5,size:"20"})}),e.jsx(m,{"aria-label":"delete",children:e.jsx(_,{stroke:1.5,size:"20"})})]})})},Sr=()=>{const[a,n]=M.useState(!1);return e.jsxs(H,{title:"Chat ui",description:"this is Chat page",children:[e.jsx(G,{title:"Chat app",subtitle:"Messenger"}),e.jsxs(ce,{children:[e.jsx(pe,{isMobileSidebarOpen:a,onSidebarClose:()=>n(!1)}),e.jsxs(t,{flexGrow:1,children:[e.jsx(xe,{toggleChatSidebar:()=>n(!0)}),e.jsx(R,{}),e.jsx(he,{})]})]})]})};export{Sr as default};
